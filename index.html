<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Motion Detection</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>
<body>
  <script>
    let value = 0;

    function setup() {
      createCanvas(windowWidth, windowHeight);
      let btn = createButton("Motion");
      btn.position(10, 10); // Set button position
      btn.mousePressed(function() {
        if (typeof DeviceOrientationEvent.requestPermission === 'function') {
          DeviceOrientationEvent.requestPermission()
            .then(response => {
              if (response == 'granted') {
                console.log("Permission granted");
              }
            })
            .catch(console.error);
        }
      });
    }

    function draw() {
      background(255);
      fill(value, 0, 0);
      rect(0, 0, width, height);
    }

    /* The deviceMoved() function is called when the device is moved by more than the threshold value along X, Y or Z axis. 
       The default threshold is set to 0.5. The threshold value can be changed using setMoveThreshold().
    */
    function deviceMoved() {
      value += 5;
      if (value > 255) {
        value = 0;
      }
    }
  </script>
</body>
</html>
