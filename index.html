<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kinetic Typography with Motion</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>
<body>
  <script>
    let x = 0;
    let y = 0;
    let angle = 0;
    let textSizeValue = 50;

    function setup() {
      createCanvas(windowWidth, windowHeight);
      textAlign(CENTER, CENTER);
      textSize(textSizeValue);
      let btn = createButton("Enable Motion");
      btn.position(10, 10);
      btn.mousePressed(function() {
        if (typeof DeviceOrientationEvent.requestPermission === 'function') {
          DeviceOrientationEvent.requestPermission()
            .then(response => {
              if (response == 'granted') {
                console.log("Permission granted");
              }
            })
            .catch(console.error);
        }
      });
    }

    function draw() {
      background(255);
      fill(0);

      // Apply transformations for kinetic effect
      push();
      translate(x, y);
      rotate(angle);
      textSize(textSizeValue);
      text("Move Me", 0, 0);
      pop();
    }

    /* Kinetic Typography Logic */
    function deviceMoved() {
      // Randomly change position within the canvas dimensions
      x = random(width);
      y = random(height);
      
      // Randomly change the angle of the text
      angle += radians(10);
      
      // Change text size slightly to create a pulsating effect
      textSizeValue = random(30, 70);
      
      // Keep angle within bounds of 360 degrees
      if (angle > TWO_PI) {
        angle = 0;
      }
    }
  </script>
</body>
</html>
